@model eInvoicing.Web.Models.SettingViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .input-group-append {
        margin-left: 0 !important;
    }
    .chkbox_disabled {
        pointer-events: none !important;
    }
   
</style>
<script src="~/Content/assets/js/pages/crud/forms/widgets/select2.js"></script>
<div class="container-fluid">
    <!--begin::Subheader-->
    <div class="subheader py-2 py-lg-6  subheader-transparent " id="kt_subheader">
        <div class=" container  d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
            <!--begin::Info-->
            <div class="d-flex align-items-center flex-wrap mr-1">
                <!--begin::Page Heading-->
                <div class="d-flex align-items-baseline flex-wrap mr-5">
                    <!--begin::Page Title-->
                    <h5 class="text-dark font-weight-bold my-1 mr-5">
                        General Settings
                    </h5>
                    <!--end::Page Title-->
                    <!--begin::Breadcrumb-->
                    <ul class="breadcrumb breadcrumb-transparent breadcrumb-dot font-weight-bold p-0 my-2 font-size-sm">
                        <li class="breadcrumb-item">
                            <a href="" class="text-muted">
                                Home
                            </a>
                        </li>
                        <li class="breadcrumb-item">
                            <a href="" class="text-muted">
                                General Settings
                            </a>
                        </li>
                    </ul>
                    <!--end::Breadcrumb-->
                </div>
                <!--end::Page Heading-->
            </div>
            <!--end::Info-->
        </div>
        <div class="topbar-item" style="margin-right:25px !important">
            @using System.Security.Claims;
            @using Microsoft.AspNet.Identity;
            @if (Request.IsAuthenticated)
            {
                using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
                {
                    @Html.AntiForgeryToken()
                    <a class="btn btn-icon btn-icon-mobile w-auto btn-clean d-flex align-items-center btn-lg px-2" data-toggle="dropdown" role="button" id="kt_quick_user_toggle">
                        <div class="d-flex flex-column text-right pr-3">
                            <span class="text-primary font-weight-bold font-size-base d-none d-md-inline mr-1">@User.Identity.GetUserName()</span>
                            <span class="text-primary font-weight-bolder font-size-sm d-none d-md-inline" style="text-align: left !important;">@Html.DisplayName(((ClaimsPrincipal)HttpContext.Current.User).FindFirst("Title")?.Value)</span>
                        </div>
                        <span class="symbol symbol-lg-35 symbol-25 symbol-light-primary">
                            <span class="symbol-label font-size-h5 font-weight-bold">@User.Identity.GetUserName().ToUpper().FirstOrDefault()</span>
                        </span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-left dropdown-menu-icon-list" style="width: 10.5% !important; font-size:smaller !important; top: 3px !important; margin-left: -40px !important;">
                        <a class="dropdown-item" href="javascript:document.getElementById('logoutForm').submit()">
                            <span class="svg-icon svg-icon-primary svg-icon" style="padding-right:inherit">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <rect x="0" y="0" width="24" height="24" />
                                        <path d="M14.0069431,7.00607258 C13.4546584,7.00607258 13.0069431,6.55855153 13.0069431,6.00650634 C13.0069431,5.45446114 13.4546584,5.00694009 14.0069431,5.00694009 L15.0069431,5.00694009 C17.2160821,5.00694009 19.0069431,6.7970243 19.0069431,9.00520507 L19.0069431,15.001735 C19.0069431,17.2099158 17.2160821,19 15.0069431,19 L3.00694311,19 C0.797804106,19 -0.993056895,17.2099158 -0.993056895,15.001735 L-0.993056895,8.99826498 C-0.993056895,6.7900842 0.797804106,5 3.00694311,5 L4.00694793,5 C4.55923268,5 5.00694793,5.44752105 5.00694793,5.99956624 C5.00694793,6.55161144 4.55923268,6.99913249 4.00694793,6.99913249 L3.00694311,6.99913249 C1.90237361,6.99913249 1.00694311,7.89417459 1.00694311,8.99826498 L1.00694311,15.001735 C1.00694311,16.1058254 1.90237361,17.0008675 3.00694311,17.0008675 L15.0069431,17.0008675 C16.1115126,17.0008675 17.0069431,16.1058254 17.0069431,15.001735 L17.0069431,9.00520507 C17.0069431,7.90111468 16.1115126,7.00607258 15.0069431,7.00607258 L14.0069431,7.00607258 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(9.006943, 12.000000) scale(-1, 1) rotate(-90.000000) translate(-9.006943, -12.000000) " />
                                        <rect fill="#000000" opacity="0.3" transform="translate(14.000000, 12.000000) rotate(-270.000000) translate(-14.000000, -12.000000) " x="13" y="6" width="2" height="12" rx="1" />
                                        <path d="M21.7928932,9.79289322 C22.1834175,9.40236893 22.8165825,9.40236893 23.2071068,9.79289322 C23.5976311,10.1834175 23.5976311,10.8165825 23.2071068,11.2071068 L20.2071068,14.2071068 C19.8165825,14.5976311 19.1834175,14.5976311 18.7928932,14.2071068 L15.7928932,11.2071068 C15.4023689,10.8165825 15.4023689,10.1834175 15.7928932,9.79289322 C16.1834175,9.40236893 16.8165825,9.40236893 17.2071068,9.79289322 L19.5,12.0857864 L21.7928932,9.79289322 Z" fill="#000000" fill-rule="nonzero" transform="translate(19.500000, 12.000000) rotate(-90.000000) translate(-19.500000, -12.000000) " />
                                    </g>
                                </svg>
                            </span>
                            <span class="menu-text" style="padding-top: 3px;">Sign Out</span>
                        </a>
                    </div>
                }

            }
        </div>
    </div>
    <!--end::Subheader-->
    <div class="row mb-1">
        <div class="col-md-12">
            <button type="button" id="editBtn1" class="btn btn-primary font-weight-bold btn-square" style="float:right !important"><i class="fa fa-edit"></i> Edit</button>
            <a type="button" class="btn btn-secondary font-weight-bold btn-square save_changes" href="@Url.Action("Index","Master")" style="float:right !important">Cancel</a>
            <button type="button" id="btnsubmit" class="btn btn-primary font-weight-bold btn-square save_changes mr-1" style="float:right !important">Save</button>
        </div>
    </div>
    <ul class="nav nav-tabs nav-tabs-line">
        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#kt_tab_pane_11">Pre Production</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#kt_tab_pane_22">Production</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#kt_tab_pane_33">General</a>
        </li>
    </ul>
    @using (Html.BeginForm("update", "appsetting", FormMethod.Post, new { @class = "", role = "form", @id = "_frm" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="tab-content mt-5" id="myTabContent50">
            <div class="tab-pane fade show active" id="kt_tab_pane_11" role="tabpanel" aria-labelledby="kt_tab_pane_11">
                <div class="row">
                    <div class="col-lg-12 draggable-zone">
                        <div class="card card-custom gutter-b draggable" data-card="true" id="kt_card_50">
                            <div class="card-body">
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-12">

                                            <label>Login Base Address</label>
                                            @Html.TextBoxFor(m => m.PreProductionLoginURL, new { @class = "form-control form-control-solid disable1", @readonly = "readonly" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label>APIs Base Address</label>
                                            @Html.TextBoxFor(model => model.PreProductionApiURL, new { @class = "form-control form-control-solid disable1", @readonly = "readonly" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label>Client Id</label>
                                            @Html.TextBoxFor(model => model.PreProductionClientId, new { @class = "form-control form-control-solid disable1", @readonly = "readonly" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label>Client Secret</label>
                                            <div class="input-group">
                                                @Html.TextBoxFor(model => model.PreProductionClientSecret, new { @class = "form-control form-control-solid disable1", @readonly = "readonly" })
                                                @*<div class="input-group-append">
                                                    <span class="input-group-text editBtn1">
                                                        <i class="la la-edit icon-lg" style="cursor: pointer !important;"></i>
                                                    </span>
                                                </div>*@
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="kt_tab_pane_22" role="tabpanel" aria-labelledby="kt_tab_pane_22">
                <div class="row">
                    <div class="col-lg-12 draggable-zone">
                        <!--begin::Example-->
                        <!--begin::Card-->
                        <div class="card card-custom gutter-b draggable" data-card="true" id="kt_card_22">
                            <div class="card-body">
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label>Login Base Address</label>
                                            @Html.TextBoxFor(model => model.ProductionLoginURL, new { @class = "form-control form-control-solid disable1", @readonly = "readonly" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label>APIs Base Address</label>
                                            @Html.TextBoxFor(model => model.ProductionApiURL, new { @class = "form-control form-control-solid disable1", @readonly = "readonly" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label>Client Id</label>
                                            @Html.TextBoxFor(model => model.ProductionClientId, new { @class = "form-control form-control-solid disable1", @readonly = "readonly" })
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <label>Client Secret</label>
                                            <div class="input-group">
                                                @Html.TextBoxFor(model => model.ProductionClientSecret, new { @class = "form-control form-control-solid disable1", @readonly = "readonly" })
                                                @*<div class="input-group-append">
                                                    <span class="input-group-text editBtn11">
                                                        <i class="la la-edit icon-lg" style="cursor: pointer !important;"></i>
                                                    </span>
                                                </div>*@
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                    <!--end::Card-->
                </div>
            </div>
            <div class="tab-pane fade" id="kt_tab_pane_33" role="tabpanel" aria-labelledby="kt_tab_pane_33">
                <div class="row">
                    <div class="col-lg-12 draggable-zone">
                        <!--begin::Example-->
                        <!--begin::Card-->
                        <div class="card card-custom gutter-b draggable" data-card="true" id="kt_card_33">
                            <div class="card-body">
                                <div class="form-group row pointer chkbox_disabled">
                                    <label class="col-form-label text-left col-lg-3 col-sm-12">APIs Environment:</label>
                                    <div class="col-lg-9 col-md-9 col-sm-12">
                                        @Html.CheckBoxFor(m => m.APIsEnvironment, new { data_switch = "true", @type = "checkbox", data_on_text = "Prod",
                                       @class= "form-control-solid disable1", data_handle_width = "70", data_off_text = "UAT", data_on_color = "primary" })
                                    </div>
                                </div>
                                <div class="form-group row pointer chkbox_disabled">
                                    <label class="col-form-label text-left col-lg-3 col-sm-12">Type Version:</label>
                                    <div class="col-lg-9 col-md-9 col-sm-12">
                                        @Html.CheckBoxFor(m => m.TypeVersion, new { data_switch = "true", @type = "checkbox", data_on_text = "1.0", @class = "form-control-solid disable1"
                                       , data_handle_width = "70", data_off_text = "0.9", data_on_color = "primary" })
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                    <!--end::Card-->
                </div>
            </div>
            <!--<div class="tab-pane fade" id="kt_tab_pane_44" role="tabpanel" aria-labelledby="kt_tab_pane_44">
                <div class="row">
                    <div class="col-lg-12 draggable-zone">
                        <div class="card card-custom gutter-b draggable" data-card="true" id="kt_card_44">
                            <div class="card-body">
                                <div class="form-group row">
                                    <label class="col-lg-3 col-form-label text-lg-right"></label>
                                    <div class="uppy col-6" id="kt_uppy_1">
                                        <div class="uppy-dashboard"></div>
                                        <div class="uppy-progress"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>-->
                    <!--end::Card-->
                <!--</div>
            </div>-->
        </div>
    }
</div>
<script>
    jQuery(document).ready(function () {
        $('.save_changes').hide();
        $("#btnsubmit").click(function (e) {
            KTApp.blockPage();
            var valdata = $("#_frm").serialize();
            //to get alert popup
            $.ajax({
                url: "/EInvoicing/v0/appsetting/update",
                type: "POST",
                dataType: 'json',
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                data: valdata,
                success: function (response) {
                    $('.save_changes').hide();
                    $('#editBtn1').show();
                    $('.disable1').attr('readonly', 'readonly');
                    $('.pointer').addClass('chkbox_disabled');
                    $('.disable1').addClass('form-control-solid');
                    KTApp.unblockPage();
                    if (!response) {
                        toastr.options = {
                            "closeButton": false,
                            "debug": false,
                            "newestOnTop": true,
                            "progressBar": false,
                            "positionClass": "toast-top-center",
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "300",
                            "hideDuration": "1000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        };
                        toastr.error("Something went wrong!");
                    }
                    else {
                        toastr.options = {
                            "closeButton": false,
                            "debug": false,
                            "newestOnTop": true,
                            "progressBar": false,
                            "positionClass": "toast-top-center",
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "300",
                            "hideDuration": "1000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        };
                        toastr.success("Data has been saved successfully!");
                    }
                }
            });
        });

        $('input[name=License]').change(function (ev) {
            if ($('input[name=License]')[0].files.length == 0) {
                $("#_import").css("display", "none");
            }
            else {
                $("#_import").css("display", "");
            }
        });
        $("#del").on("click", function () {
            $("#_import").css("display", "none");
            $('input[name=License]').val("");
        });

        $('#editBtn1').on('click', function (event) {
            event.preventDefault();
            $('.disable1').removeAttr('readonly');
            $('.pointer').removeClass('chkbox_disabled');
            $('.disable1').removeClass('form-control-solid');
            $('#editBtn1').hide();
            $('.save_changes').show();
        });
        KTBootstrapSwitch.init();
    });
    var KTBootstrapSwitch = function () {

        // Private functions
        var demos = function () {
            // minimum setup
            $('[data-switch=true]').bootstrapSwitch();
        };
        return {
            // public functions
            init: function () {
                demos();
            },
        };
    }();
</script>
